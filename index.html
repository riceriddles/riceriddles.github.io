<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>楽しいスロットゲーム</title>
  <style>
    :root{--bg:#0b1220;--card:#0f1724;--accent:#ffd166;--muted:#9aa7b2}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071022 0%,#08111a 60%);display:flex;align-items:center;justify-content:center;color:#eef2f7}
    .machine{width:700px;max-width:95%;padding:28px;border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.03),transparent);box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    h1{margin:0 0 12px;font-size:20px;text-align:center}
    .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .display{background:linear-gradient(90deg,#07182a,#092032);padding:10px 14px;border-radius:10px;min-width:220px;text-align:center}
    .credits{font-size:18px;font-weight:700;color:var(--accent)}
    .info{font-size:12px;color:var(--muted)}
    .board{display:flex;justify-content:center;gap:16px;padding:18px;background:linear-gradient(180deg,#071826,#0b2530);border-radius:12px;margin-bottom:16px}
    .reel{width:140px;height:140px;border-radius:10px;background:linear-gradient(180deg,#0b1620,#071216);display:flex;align-items:center;justify-content:center;font-size:48px;box-shadow:inset 0 -8px 20px rgba(0,0,0,0.6)}
    .controls{display:flex;gap:12px;align-items:center;justify-content:center}
    button{background:var(--accent);border:none;padding:10px 18px;border-radius:10px;font-weight:700;cursor:pointer}
    button:active{transform:translateY(1px)}
    input[type=number]{width:80px;padding:8px;border-radius:8px;border:none;text-align:center}
    .msg{height:22px;text-align:center;color:#bfe3ff;margin-top:8px}
    .small{font-size:13px;color:var(--muted)}
    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;color:var(--muted);font-size:13px}
    @media(max-width:560px){.reel{width:86px;height:86px;font-size:32px}.board{gap:8px}}
  </style>
</head>
<body>
  <div class="machine" role="application">
    <h1>楽しいスロットマシン</h1>
    <div class="top">
      <div class="display">
        <div class="credits">クレジット: <span id="credits">100</span></div>
        <div class="info small">ベットとスピンで遊んでください</div>
      </div>
      <div class="display">
        <div class="small">勝利ルール</div>
        <div class="small">3つ揃いで大勝ち</div>
      </div>
    </div>
    <div class="board" aria-hidden="false">
      <div class="reel" id="reel0">🍒</div>
      <div class="reel" id="reel1">🍋</div>
      <div class="reel" id="reel2">🍊</div>
    </div>
    <div class="controls">
      <label class="small">ベット
        <input id="bet" type="number" min="1" value="5">
      </label>
      <button id="spin">SPIN</button>
      <button id="auto">AUTO OFF</button>
      <button id="reset">リセット</button>
    </div>
    <div class="msg" id="msg">ようこそ。楽しんでください。</div>
    <div class="footer">
      <div class="small">シンボル: 🍒🍋🍊🔔⭐7️⃣</div>
      <div class="small">中学生以上推奨</div>
    </div>
  </div>
  <script>
    const symbols=["🍒","🍋","🍊","🔔","⭐","7️⃣"]
    const creditsEl=document.getElementById('credits')
    const reelEls=[document.getElementById('reel0'),document.getElementById('reel1'),document.getElementById('reel2')]
    const spinBtn=document.getElementById('spin')
    const autoBtn=document.getElementById('auto')
    const betInput=document.getElementById('bet')
    const msgEl=document.getElementById('msg')
    const resetBtn=document.getElementById('reset')
    let credits=100
    let spinning=false
    let auto=false
    let intervals=[]
    function updateCredits(){creditsEl.textContent=credits}
    function randSymbol(){return symbols[Math.floor(Math.random()*symbols.length)]}
    function startCycle(index){intervals[index]=setInterval(()=>{reelEls[index].textContent=randSymbol()},50)}
    function stopCycle(index,final){clearInterval(intervals[index]);reelEls[index].textContent=final}
    function payout(result,bet){const [a,b,c]=result
      if(a===b && b===c){if(a==='7️⃣')return bet*50;if(a==='⭐')return bet*10;if(a==='🔔')return bet*5;return bet*3}
      if(a===b || b===c || a===c)return Math.floor(bet*1.5)
      return 0}
    function spin(){if(spinning)return
      let bet=Math.max(1,Math.floor(Number(betInput.value)||1))
      if(bet>credits){msgEl.textContent='クレジットが足りません';return}
      spinning=true
      credits-=bet
      updateCredits()
      msgEl.textContent='スピン中…'
      const finals=[randSymbol(),randSymbol(),randSymbol()]
      startCycle(0);startCycle(1);startCycle(2)
      setTimeout(()=>stopCycle(0,finals[0]),700)
      setTimeout(()=>stopCycle(1,finals[1]),1200)
      setTimeout(()=>{
        stopCycle(2,finals[2])
        const win=payout(finals,bet)
        if(win>0){credits+=win;msgEl.textContent=`当たり！ +${win} クレジット`}
        else{msgEl.textContent='はずれ。次はがんばってください'}
        updateCredits()
        spinning=false
        if(auto && credits>0){setTimeout(spin,700)}
      },1700)
    }
    spinBtn.addEventListener('click',spin)
    resetBtn.addEventListener('click',()=>{credits=100;updateCredits();msgEl.textContent='リセットしました'})
    autoBtn.addEventListener('click',()=>{auto=!auto;autoBtn.textContent=auto? 'AUTO ON':'AUTO OFF';if(auto && !spinning){spin()}})
    updateCredits()
  </script>
</body>
</html>
